<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Canorus-devel] Some suggestions on code design changes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/canorus-devel/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:canorus-devel%40lists.berlios.de?Subject=Re%3A%20%5BCanorus-devel%5D%20Some%20suggestions%20on%20code%20design%20changes&In-Reply-To=%3C832857ae0702282007v5bf8cd3aveeaac48c67e45c40%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000052.html">
   <LINK REL="Next"  HREF="000051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Canorus-devel] Some suggestions on code design changes</H1>
    <B>canorus-devel at lists.berlios.de</B> 
    <A HREF="mailto:canorus-devel%40lists.berlios.de?Subject=Re%3A%20%5BCanorus-devel%5D%20Some%20suggestions%20on%20code%20design%20changes&In-Reply-To=%3C832857ae0702282007v5bf8cd3aveeaac48c67e45c40%40mail.gmail.com%3E"
       TITLE="[Canorus-devel] Some suggestions on code design changes">canorus-devel at lists.berlios.de
       </A><BR>
    <I>Thu Mar  1 05:07:00 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000052.html">[Canorus-devel] PATCH: Switching between music element insert tools	properly
</A></li>
        <LI>Next message: <A HREF="000051.html">[Canorus-devel] Some suggestions on code design changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50">[ date ]</a>
              <a href="thread.html#50">[ thread ]</a>
              <a href="subject.html#50">[ subject ]</a>
              <a href="author.html#50">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

In writing the previous patch I sent in my other mail and finding
other bugs, I noticed some larger issues.

The main window class is rather large and monolithic. The handling of
mode changes and UI updates seems error-prone.

I would suggest to use a finite state machine approach. This would
make clear what happens on entrance, exit of each state and transition
from state to state, and what happens during each mode.

I'm not sure of the Qt metaphor for this (action?), but keypress and
menu items need to share unified code. In addition, you should be able
to assign keyboard shortcuts to the action. This goes along with
moving the keypress-handling code out of the main window class.


Also I noticed that the engraver consists of one large function. I
don't know how anyone can understand all of that, even the author :)

I would volunteer to work on any of these aspects, but I'm not so
familiar with Qt or the design of Canorus, so might have trouble doing
it. Anyway, let me know if you need help.

Regards,
Seth

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000052.html">[Canorus-devel] PATCH: Switching between music element insert tools	properly
</A></li>
	<LI>Next message: <A HREF="000051.html">[Canorus-devel] Some suggestions on code design changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#50">[ date ]</a>
              <a href="thread.html#50">[ thread ]</a>
              <a href="subject.html#50">[ subject ]</a>
              <a href="author.html#50">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/canorus-devel">More information about the Canorus-devel
mailing list</a><br>
</body></html>
